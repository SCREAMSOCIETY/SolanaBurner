<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SolBurn</title>
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/animations.css">
    <link rel="stylesheet" href="/static/wallet-assets.css">
    <link rel="stylesheet" href="/static/bulk-burn.css">
    <link rel="stylesheet" href="/static/refresh-styles.css">
    <link rel="stylesheet" href="/static/modal.css">
    <link rel="stylesheet" href="/static/robust-transfer-modal.css">
    <link rel="stylesheet" href="/static/direct-trash-modal.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <div id="app"></div>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="/static/dist/vendors-node_modules_ledgerhq_hw-transport-webhid_lib-es_TransportWebHID_js.js"></script>
    <script src="/static/dist/vendors-node_modules_solflare-wallet_sdk_lib_esm_index_js.js"></script>
    <script src="/static/dist/vendors-node_modules_solflare-wallet_metamask-sdk_lib_esm_index_js.js"></script>
    <script src="/static/dist/app.js"></script>
    <script src="/static/dist/WalletProvider.js"></script>
    <script src="/static/dist/cnft-handler.js"></script>
    <script src="/static/dist/fixed-cnft-handler.js"></script>
    <script src="/static/dist/safe-transfer-cnft.js"></script>
    <script src="/static/dist/bubblegum-transfer.js"></script>
    <script src="/static/dist/metaplex-cnft-transfer.js"></script>
    <script src="/static/dist/fixed-bubblegum-transfer.js"></script>
    <script src="/static/dist/self-contained-transfer.js"></script>
    <script src="/static/dist/server-side-transfer.js"></script>
    <script src="/static/dist/direct-transfer.js"></script>
    <script src="/static/dist/standalone-transfer.js"></script>
    <script src="/static/dist/solo-transfer.js"></script>
    <script src="/static/dist/improved-server-transfer.js"></script>
    <script src="/static/dist/working-transfer.js"></script>
    <script src="/static/dist/minimal-transfer.js"></script>
    <script src="/static/dist/debug-transfer.js"></script>
    <script src="/static/dist/server-side-patch.js"></script>
    <script src="/static/dist/self-contained-patch.js"></script>
    <script src="/static/dist/cnft-direct-patch.js"></script>
    <script src="/static/dist/basic-transfer.js"></script>
    <script src="/static/dist/hidden-assets.js"></script>
    <script src="/static/dist/animations.js"></script>
    <script src="/static/js/cache-init.js"></script>
    <script src="/static/js/proof-prefetcher.js"></script>
    <script src="/static/robust-transfer.js"></script>
    <script src="/static/js/cnft-fix.js"></script>
    <script src="/static/js/standalone-cnft-transfer.js"></script>
    <script src="/static/js/cNFTStandaloneTransfer.js"></script>
    <script>
        // Initialize ENV values
        window.ENV = window.ENV || {};
        
        // Fetch configuration from backend
        fetch('/api/config')
            .then(response => response.json())
            .then(config => {
                console.log('[index.html] Loaded API config from server');
                
                // Store configuration values 
                window.ENV.HELIUS_API_KEY = config.heliusApiKey || '';
                window.ENV.SOLSCAN_API_KEY = config.solscanApiKey || '';
                window.ENV.QUICKNODE_RPC_URL = config.quicknodeRpcUrl || '';
                window.ENV.ENVIRONMENT = config.environment || 'development';
                
                // Store tree information
                if (config.treeInfo) {
                    window.ENV.TREE_INFO = config.treeInfo;
                }
                
                // Log environment status (don't log actual keys)
                console.log('[index.html] Environment initialized:', {
                    heliusKeyPresent: !!window.ENV.HELIUS_API_KEY,
                    quicknodeRpcPresent: !!window.ENV.QUICKNODE_RPC_URL,
                    solscanKeyPresent: !!window.ENV.SOLSCAN_API_KEY,
                    environment: window.ENV.ENVIRONMENT
                });
                
                // Initialize the app after config is loaded
                if (window.App && typeof window.App.render === 'function') {
                    console.log('[index.html] Initializing App after config load');
                    window.App.render();
                } else {
                    console.error('[index.html] App.render not found after config load');
                }
            })
            .catch(error => {
                console.error('[index.html] Failed to load API config:', error);
                
                // Still try to initialize the app even if config failed
                if (window.App && typeof window.App.render === 'function') {
                    console.log('[index.html] Initializing App despite config error');
                    window.App.render();
                } else {
                    console.error('[index.html] App.render not found after config error');
                }
            });
    </script>
</body>
</html>